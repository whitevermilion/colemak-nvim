è¿™ä¸ª `mermaid.vim` æ’ä»¶æ˜¯ä¸€ä¸ªåœ¨ Neovim ä¸­é¢„è§ˆ Mermaid å›¾è¡¨çš„å·¥å…·ã€‚è®©æˆ‘ä¸ºä½ è¯¦ç»†ä»‹ç»ï¼š

## æ’ä»¶åŠŸèƒ½

**Mermaid æ˜¯ä¸€ä¸ªå›¾è¡¨ç»˜åˆ¶å·¥å…·**ï¼Œæ”¯æŒï¼š

- ğŸ“Š **æµç¨‹å›¾** (Flowchart)
- ğŸ“… **åºåˆ—å›¾** (Sequence Diagram)
- ğŸ¯ **ç”˜ç‰¹å›¾** (Gantt)
- ğŸ—ï¸ **ç±»å›¾** (Class Diagram)
- ğŸ“ˆ **çŠ¶æ€å›¾** (State Diagram)
- ç­‰ç­‰...

## ä¸»è¦åŠŸèƒ½

| åŠŸèƒ½             | æè¿°                            |
| ---------------- | ------------------------------- |
| **å®æ—¶é¢„è§ˆ**     | åœ¨æµè§ˆå™¨ä¸­é¢„è§ˆ Mermaid å›¾è¡¨     |
| **è¯­æ³•é«˜äº®**     | ä¸º Mermaid ä»£ç æä¾›è¯­æ³•é«˜äº®     |
| **æ–‡ä»¶ç±»å‹æ”¯æŒ** | æ”¯æŒ Markdown å’Œçº¯ Mermaid æ–‡ä»¶ |
| **å¿«é€Ÿæ“ä½œ**     | é€šè¿‡å¿«æ·é”®å¿«é€Ÿé¢„è§ˆå’Œåœæ­¢        |

## ä½¿ç”¨æ–¹æ³•

### 1. **ç¼–å†™ Mermaid ä»£ç **

åœ¨ Markdown æ–‡ä»¶ä¸­ï¼š

```mermaid
graph TD
    A[å¼€å§‹] --> B{åˆ¤æ–­}
    B -->|æ˜¯| C[æ‰§è¡Œ1]
    C --> D[ç»“æŸ]
    B -->|å¦| E[æ‰§è¡Œ2]
    E --> D
```

æˆ–è€…åœ¨ `.mermaid` æ–‡ä»¶ä¸­ï¼š

```mermaid
sequenceDiagram
    participant A as ç”¨æˆ·
    participant B as ç³»ç»Ÿ
    A->>B: è¯·æ±‚æ•°æ®
    B->>A: è¿”å›ç»“æœ
```

### 2. **ä½¿ç”¨å¿«æ·é”®**

- `<leader>mp` - **é¢„è§ˆå›¾è¡¨**ï¼ˆåœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ï¼‰
- `<leader>ms` - **åœæ­¢é¢„è§ˆ**ï¼ˆå…³é—­é¢„è§ˆï¼‰

### 3. **å¸¸ç”¨å›¾è¡¨ç±»å‹ç¤ºä¾‹**

**æµç¨‹å›¾ï¼š**

```mermaid
graph LR
    Start --> Stop
```

**åºåˆ—å›¾ï¼š**

```mermaid
sequenceDiagram
    Alice->>John: ä½ å¥½ Johnï¼Œä½ å¥½å—ï¼Ÿ
    John-->>Alice: å¾ˆå¥½ï¼
```

**ç”˜ç‰¹å›¾ï¼š**

```mermaid
gantt
    title é¡¹ç›®è®¡åˆ’
    section è®¾è®¡
    éœ€æ±‚åˆ†æ: done, des1, 2024-01-01, 7d
    æŠ€æœ¯è®¾è®¡: active, des2, after des1, 5d
```

## é…ç½®ä¼˜åŒ–å»ºè®®

ä½ çš„é…ç½®å·²ç»å¾ˆå¥½äº†ï¼Œè¿™é‡Œæ˜¯ä¸€äº›å¯é€‰çš„å¢å¼ºé…ç½®ï¼š

```lua
return {
  "mracos/mermaid.vim",
  ft = { "markdown", "mermaid" },
  config = function()
    -- Mermaid é…ç½®
    vim.g.mermaid_default_config = {
      startOnLoad = true,
      theme = "default", -- å¯é€‰: "default", "forest", "dark", "neutral"
      flowchart = {
        useMaxWidth = false,
        htmlLabels = true,
        curve = "basis", -- è¿çº¿æ ·å¼
      },
      sequence = {
        diagramMarginX = 50,
        diagramMarginY = 10,
        actorMargin = 50,
      },
      -- æ›´å¤šé…ç½®é€‰é¡¹...
    }

    -- å¯ç”¨è¯­æ³•é«˜äº®
    vim.g.vim_mermaid_initialized = 1

    -- å¿«æ·é”®æ˜ å°„
    vim.keymap.set("n", "<leader>mp", ":MermaidPreview<CR>", {
      desc = "Preview mermaid diagram",
      buffer = true, -- åªåœ¨ç›¸å…³æ–‡ä»¶ç±»å‹ä¸­ç”Ÿæ•ˆ
    })
    vim.keymap.set("n", "<leader>ms", ":MermaidStop<CR>", {
      desc = "Stop mermaid preview",
      buffer = true,
    })
    vim.keymap.set("n", "<leader>mc", ":MermaidCompile<CR>", {
      desc = "Compile mermaid to image", -- å¦‚æœæœ‰è¿™ä¸ªåŠŸèƒ½çš„è¯
      buffer = true,
    })
  end,
}
```

## å·¥ä½œæµç¨‹ç¤ºä¾‹

### **åœºæ™¯ 1ï¼šåœ¨ Markdown ä¸­ç»˜åˆ¶æ¶æ„å›¾**

1. åœ¨ Markdown æ–‡ä»¶ä¸­ç¼–å†™ Mermaid ä»£ç å—
2. å°†å…‰æ ‡æ”¾åœ¨ä»£ç å—å†…
3. æŒ‰ `<leader>mp` åœ¨æµè§ˆå™¨ä¸­é¢„è§ˆ
4. è°ƒæ•´ä»£ç ç›´åˆ°æ»¡æ„
5. æŒ‰ `<leader>ms` å…³é—­é¢„è§ˆ

### **åœºæ™¯ 2ï¼šä¸“é—¨çš„å›¾è¡¨æ–‡ä»¶**

1. åˆ›å»º `architecture.mermaid` æ–‡ä»¶
2. ç¼–å†™å¤æ‚çš„ç³»ç»Ÿæ¶æ„å›¾
3. ä½¿ç”¨é¢„è§ˆåŠŸèƒ½æ£€æŸ¥æ•ˆæœ
4. å¯¼å‡ºä¸ºå›¾ç‰‡æˆ–ä¿ç•™æºä»£ç 

## ä¾èµ–è¦æ±‚

ç¡®ä¿ä½ çš„ç³»ç»Ÿæœ‰ï¼š

- **ç°ä»£æµè§ˆå™¨**ï¼ˆChromeã€Firefoxã€Safari ç­‰ï¼‰
- **Python 3**ï¼ˆæŸäº›é¢„è§ˆåŠŸèƒ½å¯èƒ½éœ€è¦ï¼‰
- **Node.js**ï¼ˆå¯é€‰ï¼Œç”¨äºé«˜çº§åŠŸèƒ½ï¼‰

## ä½¿ç”¨æŠ€å·§

1. **ä¸»é¢˜åˆ‡æ¢** - å°è¯•ä¸åŒçš„ `theme` é€‰é¡¹æ‰¾åˆ°å–œæ¬¢çš„é£æ ¼
2. **å“åº”å¼è®¾è®¡** - è®¾ç½® `useMaxWidth` æ§åˆ¶å›¾è¡¨å®½åº¦
3. **ç¦»çº¿ä½¿ç”¨** - å¦‚æœç»å¸¸ä½¿ç”¨ï¼Œå¯ä»¥è€ƒè™‘é…ç½®ç¦»çº¿æ¸²æŸ“
4. **å¯¼å‡ºåŠŸèƒ½** - æŸ¥çœ‹æ’ä»¶æ˜¯å¦æ”¯æŒå¯¼å‡ºä¸º PNG/SVG

## å¸¸è§é—®é¢˜è§£å†³

**å¦‚æœé¢„è§ˆä¸å·¥ä½œï¼š**

- æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦å®‰è£…
- ç¡®è®¤é˜²ç«å¢™æ²¡æœ‰é˜»æ­¢æœ¬åœ°æœåŠ¡å™¨
- æŸ¥çœ‹æ’ä»¶æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯

**å¦‚æœè¯­æ³•é«˜äº®ä¸æ­£å¸¸ï¼š**

- ç¡®è®¤æ–‡ä»¶ç±»å‹æ­£ç¡®è®¾ç½®
- æ£€æŸ¥æ˜¯å¦æœ‰å…¶ä»–æ’ä»¶å†²çª

è¿™ä¸ªæ’ä»¶å¯¹äºç¼–å†™æŠ€æœ¯æ–‡æ¡£ã€ç³»ç»Ÿè®¾è®¡æ–‡æ¡£éå¸¸æœ‰ç”¨ï¼Œèƒ½è®©ä½ åœ¨ Neovim ä¸­ç›´æ¥ç»˜åˆ¶å’Œé¢„è§ˆä¸“ä¸šå›¾è¡¨ï¼
